–ö–æ–Ω–µ—á–Ω–æ üëç –í–æ—Ç **–∫—Ä–∞—Ç–∫–∞—è –∏ –ø–æ–Ω—è—Ç–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞**, –±–µ–∑ –ª–∏—à–Ω–µ–π —Ç–µ–æ—Ä–∏–∏.

---

# üì¶ Railway CI/CD ‚Äî –æ—à–∏–±–∫–∏ –¥–µ–ø–ª–æ—è –∏ –∫–∞–∫ –∏—Ö –ø–æ—á–∏–Ω–∏—Ç—å

## ‚ùå –û—à–∏–±–∫–∞ 1: `Invalid RAILWAY_TOKEN`

**–ü—Ä–∏—á–∏–Ω–∞:**
–ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏–π —Ç–æ–∫–µ–Ω Railway –≤ CI.

**–†–µ—à–µ–Ω–∏–µ:**

1. –ó–∞–π—Ç–∏ –≤ Railway
2. `Account ‚Üí Tokens` ‚Üí —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω
3. –í GitHub:
   `Settings ‚Üí Secrets ‚Üí Actions ‚Üí RAILWAY_TOKEN`
   –≤—Å—Ç–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω

---

## ‚ùå –û—à–∏–±–∫–∞ 2: `Multiple services found`

**–ü—Ä–∏—á–∏–Ω–∞:**
–í –ø—Ä–æ–µ–∫—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–∏—Å–æ–≤, Railway –Ω–µ –∑–Ω–∞–µ—Ç –∫–∞–∫–æ–π –¥–µ–ø–ª–æ–∏—Ç—å.

**–†–µ—à–µ–Ω–∏–µ:**
–Ø–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å–µ—Ä–≤–∏—Å:

```yaml
railway up --service web
```

(–∏–º—è —Å–µ—Ä–≤–∏—Å–∞ –±–µ—Ä—ë—Ç—Å—è –∏–∑ Railway)

---

## ‚ùå –û—à–∏–±–∫–∞ 3: `railway is not recognized`

**–ü—Ä–∏—á–∏–Ω–∞:**
Railway CLI –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ.

**–†–µ—à–µ–Ω–∏–µ (Windows):**

```powershell
npm install -g @railway/cli
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:

```powershell
railway --version
```

---

## ‚ùå –û—à–∏–±–∫–∞ 4: `Unauthorized. Please login`

**–ü—Ä–∏—á–∏–Ω–∞:**
–ù–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:**

```powershell
railway login
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:

```powershell
railway whoami
```

---

## ‚ùå –û—à–∏–±–∫–∞ 5: `No linked project found`

**–ü—Ä–∏—á–∏–Ω–∞:**
–ü—Ä–æ–µ–∫—Ç –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–ø–∫–µ.

**–†–µ—à–µ–Ω–∏–µ:**

```powershell
railway link
```

–í—ã–±—Ä–∞—Ç—å:

* workspace
* project
* environment (`production`)
* service (`web`)

---

## üêò PostgreSQL –≤ Railway (–∏ –≤ CI)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ë–î –ø–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∫–∞–∫ –≤ `docker-compose`):

- `DB_HOST`, `DB_PORT`, `DB_USER`, `DB_PASSWORD`, `DB_NAME`

**–õ–æ–∫–∞–ª—å–Ω–æ:** –ø–æ–¥–Ω—è—Ç—å –ë–î —á–µ—Ä–µ–∑ Docker:

```bash
docker-compose up -d db
```

–°—Ö–µ–º–∞ –∏ –¥–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—é—Ç—Å—è –≤ `scripts/init_db.sql` (–ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ Postgres –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç—ã –∏–∑ `docker-entrypoint-initdb.d`).

**–í CI (GitHub Actions):** –≤ job `test` –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è —Å–µ—Ä–≤–∏—Å `postgres:17` —Å —Ç–µ–º–∏ –∂–µ `POSTGRES_*`, –∑–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `scripts/init_db.sql`, –ø–æ—Å–ª–µ —á–µ–≥–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Ç–µ—Å—Ç—ã. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `DB_*` –≤ workflow —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å `docker-compose`.

**–í Railway:**

1. –í –ø—Ä–æ–µ–∫—Ç–µ Railway –¥–æ–±–∞–≤—å—Ç–µ –ø–ª–∞–≥–∏–Ω **PostgreSQL** (New ‚Üí Database ‚Üí PostgreSQL).
2. –£ —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (web) –≤ **Variables** –∑–∞–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –ë–î:
   - `DB_HOST` = —Ö–æ—Å—Ç –∏–∑ Railway (–Ω–∞–ø—Ä–∏–º–µ—Ä `monolith.proxy.rlwy.net`)
   - `DB_PORT` = –ø–æ—Ä—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä `12345`)
   - `DB_USER`, `DB_PASSWORD`, `DB_NAME` = –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Postgres –≤ Railway
3. **–û–¥–∏–Ω —Ä–∞–∑ —Å–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –∏ –¥–∞–Ω–Ω—ã–µ:** –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `scripts/init_db.sql` –Ω–∞ –ø—Ä–æ–¥-–ë–î. –í–∞—Ä–∏–∞–Ω—Ç—ã:
   - –í Railway: –æ—Ç–∫—Ä–æ–π—Ç–µ Postgres ‚Üí **Data** –∏–ª–∏ **Query** –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `scripts/init_db.sql`, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ.
   - –õ–æ–∫–∞–ª—å–Ω–æ: `psql` –∏–ª–∏ –ª—é–±–æ–π –∫–ª–∏–µ–Ω—Ç, –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–π –∫ –ø—Ä–æ–¥-–ë–î –ø–æ —Ö–æ—Å—Ç/–ø–æ—Ä—Ç/–ª–æ–≥–∏–Ω –∏–∑ Variables, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `\i scripts/init_db.sql` –∏–ª–∏ –≤—Å—Ç–∞–≤—å—Ç–µ SQL –≤—Ä—É—á–Ω—É—é.

–ï—Å–ª–∏ `/products` –æ—Ç–¥–∞—ë—Ç **500** –∏–ª–∏ **503** ‚Äî —á–∞—â–µ –≤—Å–µ–≥–æ –Ω–µ –∑–∞–¥–∞–Ω—ã `DB_*` –∏–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ `video_cards` –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–Ω–∞ (—à–∞–≥ 3).

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ö–µ–º–∞

### –õ–æ–∫–∞–ª—å–Ω–æ (–æ–¥–∏–Ω —Ä–∞–∑):

```powershell
npm install -g @railway/cli
railway login
railway link
```

### –í CI (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):

```yaml
railway up --service web
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å

* `railway login` ‚Äî **—Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã**
* `RAILWAY_TOKEN` ‚Äî **—Ç–æ–ª—å–∫–æ –¥–ª—è CI**
* `.railway/` **–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è** –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

---

üìå –ï—Å–ª–∏ –¥–µ–ø–ª–æ–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî 90% –ø—Ä–æ–±–ª–µ–º —Ä–µ—à–∞—é—Ç—Å—è —ç—Ç–∏–º–∏ —à–∞–≥–∞–º–∏.
